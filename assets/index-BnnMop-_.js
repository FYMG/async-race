var ct=Object.defineProperty;var j=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var U=(i,e,t)=>e in i?ct(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,C=(i,e)=>{for(var t in e||(e={}))V.call(e,t)&&U(i,t,e[t]);if(j)for(var t of j(e))X.call(e,t)&&U(i,t,e[t]);return i};var L=(i,e)=>{var t={};for(var n in i)V.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&j)for(var n of j(i))e.indexOf(n)<0&&X.call(i,n)&&(t[n]=i[n]);return t};var l=(i,e,t)=>(U(i,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function J(i){return i.filter((e,t)=>i.lastIndexOf(e)===t)}class G{constructor(e){l(this,"node");l(this,"props");l(this,"children",[]);l(this,"parent",null);l(this,"onRoute",()=>{});this.props=e,this.node=this.createNode(e)}createNode(g){var o=g,{tag:e,style:t,classList:n,textContent:s,children:r}=o,c=L(o,["tag","style","classList","textContent","children"]);this.props=C({tag:e,classList:n,textContent:s,children:r},c);let d=document.createElement(e!=null?e:"div");return d=Object.assign(d,c),n&&this.applyClassList(d,n),s&&(d.textContent=s),r&&(this.children=this.appendChildrenToNode(d,r)),t&&Object.entries(t).forEach(([u,m])=>{if(m){const S=String(m);d.style.setProperty(u,S)}}),this.children=J(this.children).filter(u=>this.isChild(u)),d}isChild(e){return e.parent===this}appendChildren(e){return Array.isArray(e)?e.forEach(t=>this.append(t)):this.append(e),this}append(e){const t=this.appendToNode(this.node,e);return t&&this.children.push(t),this.children=J(this.children).filter(n=>this.isChild(n)),this}addEventListener(e,t,n){return this.node.addEventListener(e,t,n),this}getNode(){return this.node}getChildren(){return this.children}addClass(e){return this.node.classList.add(e),this}toggleClass(e){this.node.classList.toggle(e)}removeClass(e){this.node.classList.remove(e)}destroy(){var e;(e=this.parent)==null||e.removeChildren(this),this.children.forEach(t=>t.destroy()),this.node.remove()}applyClassList(e,t){typeof t=="string"?e.classList.add(t):e.classList.add(...t)}appendChildrenToNode(e,t){const n=[];if(Array.isArray(t))t.forEach(s=>{const r=this.appendToNode(e,s);r&&n.push(r)});else{const s=this.appendToNode(e,t);s!==void 0&&n.push(s)}return n}appendToNode(e,t){var n;if(typeof t=="string"){e.append(document.createTextNode(t));return}return(n=t.parent)==null||n.removeChildren(t),t.parent=this,e.append(t.node),t}haveChildren(e){return this.children.some(t=>t.getNode().isEqualNode(e.getNode()))}haveChildrenNode(e){return Array.from(this.node.children).some(t=>t.isEqualNode(e))}isNode(e){return this.node.isEqualNode(e)}replaceWith(e){return this.parent&&(this.parent.children.filter(t=>!t.getNode().isEqualNode(e.getNode())),this.parent=e.parent),e.parent&&(e.parent.children.filter(t=>!t.getNode().isEqualNode(this.getNode())),e.parent=this.parent),[this.node,e.node]=[e.node,this.node],this.node.replaceWith(e.node),this}removeChildren(e){return e.getNode().remove(),this.children=this.children.filter(t=>!t.getNode().isEqualNode(e.getNode())),e.parent=null,this}remove(){this.getNode().remove()}componentDidMount(e){return new Promise(t=>{new MutationObserver((s,r)=>{this.node&&(t(this),r.disconnect())}).observe(document.body,{childList:!0,subtree:!0})}).then(()=>e(this)).catch(t=>{}),this}}const a=i=>new G(i),I=i=>{throw new Error(i)},dt=""+new URL("logo-img-B84mcSIo.png",import.meta.url).href;var A=(i=>(i.siteName="Bear racing",i.footerText="© 2024 Bear racing.",i))(A||{});const x=(...i)=>{const e=[];return i.forEach(t=>{typeof t=="string"&&e.push(t),Array.isArray(t)&&e.push(...t)}),e},W=(...i)=>{const e=[];return i.forEach(t=>{Array.isArray(t)?e.concat(t):t!==void 0&&e.push(t)}),e},H={"site-logo":"_site-logo_1onog_2","site-logo__img":"_site-logo__img_1onog_9","site-logo__text":"_site-logo__text_1onog_12"},lt=n=>{var s=n,{classList:i,children:e}=s,t=L(s,["classList","children"]);const r=a({tag:"img",classList:H["site-logo__img"],src:dt,alt:`logo ${A.siteName}`}),c=a({tag:"span",classList:H["site-logo__text"],textContent:A.siteName});return a(C({tag:"a",classList:x(H["site-logo"],i),children:W(r,c,e)},t))},gt="_button_82d02_2",ht={button:gt},ut=n=>{var s=n,{classList:i,children:e}=s,t=L(s,["classList","children"]);return a(C({tag:"button",classList:x(ht.button,i),children:e},t))},pt="_header_jaupp_2",_t="_header__content_jaupp_8",K={header:pt,header__content:_t},st=n=>{var s=n,{classList:i,children:e}=s,t=L(s,["classList","children"]);const{route:r,routeInfo:c}=ot(),g=lt({}).addEventListener("click",()=>r(E.startPage)),o=ut({textContent:"Winners"}).addEventListener("click",()=>{c().path===E.startPage.path?(r(E.winners),o.getNode().textContent="Garage"):(o.getNode().textContent="Winners",r(E.startPage))}),d=a({tag:"div",classList:K.header__content,children:[g,o]});return a(C({tag:"header",classList:x(K.header,i),children:W(d,e)},t))},ft="_footer_llri0_2",Ct="_footer__content_llri0_5",Y={footer:ft,footer__content:Ct},rt=n=>{var s=n,{classList:i,children:e}=s,t=L(s,["classList","children"]);const r=a({tag:"div",classList:Y.footer__content,children:[a({tag:"p",textContent:A.footerText})]});return a(C({tag:"footer",classList:x(Y.footer,i),children:W(r,e)},t))},mt="_garage_yls7w_2",vt="_garage__content_yls7w_8",wt="_garage__cars_yls7w_18",Lt="_garage__control_yls7w_27",p={garage:mt,garage__content:vt,garage__cars:wt,garage__control:Lt},Q=["Audi","BMW","Ford","Geely","Haval","Honda","Hyundai","Kia","Lada","(ВАЗ)","Mazda","Mercedes-Benz","Mitsubishi","Nissan","Renault","Skoda","Toyota","Volkswagen","Acura","Daihatsu","Datsun","Honda","Infiniti","Isuzu","Lexus","Mazda","Mitsubishi","Nissan","Scion","Subaru","Suzuki","Toyota"],Z=["M5","X5","X6","X7","Super","Model 1","Model 3","Model S","Model X","Model Y","Model T"],w=class w{constructor(){l(this,"headers",{Accept:"application/json","Content-Type":"application/json"})}static create(e){return w.instance&&I("RaceApi Provider already created"),e&&(w.baseUrl=e),w.instance=new w,w.instance}static getIsInitialized(){return!!w.instance}static getInstance(){return w.instance}getResp({endpoint:e,urlParams:t={},headers:n={},callback:s}){this.load({method:"GET",endpoint:e,headers:n,callback:s,urlParams:t})}deleteResp({endpoint:e,urlParams:t={},headers:n={},callback:s=()=>{}}){this.load({method:"DELETE",endpoint:e,headers:n,callback:s,urlParams:t})}postResp({endpoint:e,callback:t,errorCallback:n=()=>{},body:s={},urlParams:r={}}){this.load({method:"POST",endpoint:e,callback:t,errorCallback:n,urlParams:r,body:s})}patchResp({endpoint:e,callback:t,errorCallback:n=()=>{},body:s={},urlParams:r={}}){this.load({method:"PATCH",endpoint:e,callback:t,errorCallback:n,urlParams:r,body:s})}putResp({endpoint:e,callback:t,body:n={},urlParams:s={}}){this.load({method:"PUT",endpoint:e,callback:t,urlParams:s,body:n})}async errorHandler(e,t=()=>{}){return e.ok||t(e),e}makeUrl(e,t){const n=e;let s=`${w.baseUrl}${t}?`;return Object.keys(n).forEach(r=>{s+=`${r}=${String(n[r])}&`}),s.slice(0,-1)}load({method:e,endpoint:t,callback:n,errorCallback:s=()=>{},body:r,urlParams:c={},headers:g={}}){fetch(this.makeUrl(c,t),{method:e,headers:C(C({},this.headers),g),body:e!=="GET"?JSON.stringify(r!=null?r:{}):void 0}).then(o=>this.errorHandler(o,s)).then(async o=>{let d;try{d=await o.json()}catch(u){d={}}return{data:d,ResponseHeaders:o.headers}}).then(({data:o,ResponseHeaders:d})=>n==null?void 0:n(o,d)).catch(o=>{throw o})}createCar(e,t,n){return new Promise((s,r)=>{this.postResp({endpoint:"/garage",callback:(c,g)=>{s(c),n==null||n(c,g)},errorCallback:r,body:{name:e,color:t}})})}getCars(e,t,n){this.getResp({endpoint:"/garage",urlParams:{_page:e,_limit:t},callback:n})}engineStop(e,t){this.patchResp({endpoint:"/engine",urlParams:{id:e,status:"stopped"},callback:t})}engineStart(e,t){this.patchResp({endpoint:"/engine",urlParams:{id:e,status:"started"},callback:t})}engineDrive(e,t){this.patchResp({endpoint:"/engine",urlParams:{id:e,status:"drive"},callback:t,errorCallback:n=>{n.status===500&&(t==null||t({success:!1}))}})}getCar(e,t){this.getResp({endpoint:`/garage/${e}`,callback:t})}deleteCar(e,t){this.deleteResp({endpoint:`/garage/${e}`,urlParams:{id:e},callback:t}),this.deleteWinner(e)}getWinner(e,t,n){this.getResp({endpoint:`/winners/${e}`,callback:t,errorCallback:n})}createWinner(e,t,n,s){this.postResp({endpoint:"/winners",body:{id:e,time:t,wins:1},callback:n,errorCallback:s})}getWinners({page:e,limit:t,sort:n,order:s,callback:r}){this.getResp({endpoint:"/winners",urlParams:{_page:e,_limit:t,_sort:n,_order:s},callback:r})}deleteWinner(e,t){this.deleteResp({endpoint:`/winners/${e}`,callback:t})}updateWinner(e,t,n,s){this.putResp({endpoint:`/winners/${e}`,body:{wins:n,time:t},callback:s})}generateCars(e,t){var s;const n=[];for(let r=0;r<e;r+=1)n.push(this.createCar((s=`${Q[Math.floor(Math.random()*Q.length)]} ${Z[Math.floor(Math.random()*Z.length)]}`)!=null?s:"Moscvich ultimate",`#${Math.floor(Math.random()*16777215).toString(16)}`));Promise.all(n).then(t)}updateCar(e,t,n,s){this.putResp({endpoint:`/garage/${e}`,callback:s,body:{name:t,color:n}})}};l(w,"instance"),l(w,"baseUrl","http://localhost:3000");let T=w;const f=()=>{T.getInstance()||I("RaceApi Provider not created");const i=T.getInstance();return{updateWinner:i.updateWinner.bind(i),getWinner:i.getWinner.bind(i),createWinner:i.createWinner.bind(i),getWinners:i.getWinners.bind(i),engineStop:i.engineStop.bind(i),engineStart:i.engineStart.bind(i),engineDrive:i.engineDrive.bind(i),generateCars:i.generateCars.bind(i),updateCar:i.updateCar.bind(i),deleteCar:i.deleteCar.bind(i),getCar:i.getCar.bind(i),createCar:i.createCar.bind(i),getCars:i.getCars.bind(i),isInitialized:T.getIsInitialized()}},yt=()=>(T.create(),f());class bt extends G{constructor(t,n,s){super(s);l(this,"nameComponent");l(this,"colorComponent");l(this,"car");l(this,"carComponent",null);this.colorComponent=t,this.nameComponent=n}update(t){this.car&&f().updateCar(this.car.id,this.nameComponent.getNode().value,this.colorComponent.getNode().value,n=>{var s;t==null||t(n),(s=this.carComponent)==null||s.setCar(n)})}selectCar(t,n){this.car=t,this.carComponent=n,this.nameComponent.getNode().value=t.name,this.colorComponent.getNode().value=t.color}}const tt=s=>{var r=s,{classList:i,edit:e,update:t}=r,n=L(r,["classList","edit","update"]);const c=a({tag:"input",classList:p["create-car__color"],value:"red",type:"color"}),g=a({tag:"input",classList:p["create-car__name"],value:"Tesla",type:"text"}),o=new bt(c,g,C({tag:"div",classList:x(p["create-car"]),children:[c,g,a({tag:"button",classList:p["create-car__button"],textContent:e?"Update car":"Create car"}).addEventListener("click",()=>{e?o.update():f().createCar(g.getNode().value,c.getNode().value).then(d=>(t==null||t(),d))})]},n));return o},xt=""+new URL("flag-uq4pW8uk.png",import.meta.url).href,Nt=`<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg class="car" height="800px" width="800px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
	 viewBox="0 0 512 512" xml:space="preserve">
<path class="car__body" style="fill:#FD6144;" d="M466.201,218.011c0-0.011-39.463-13.166-39.463-13.166c-8.811-2.926-19.242-12.209-23.203-20.604
	l-34.703-73.751c-7.899-16.8-29.561-30.54-48.128-30.54H146.286c-18.567,0-44.167,11.061-56.894,24.587l-77.824,82.685
	C5.21,193.986,0,207.107,0,216.39v105.945c0,18.567,15.191,33.758,33.758,33.758h448.838c16.17,0,29.403-15.191,29.403-33.758
	v-40.802L466.201,218.011z M46.361,199.511l67.618-71.838c6.38-6.785,22.989-13.965,32.307-13.965h174.418
	c5.536,0,15.236,6.155,17.588,11.163l34.703,74.639H46.361z"/>
<g>
	<path style="fill:#B8DE6F;" d="M133.548,280.137c41.95,0,75.956,34.006,75.956,75.956s-34.006,75.956-75.956,75.956
		s-75.956-34.006-75.956-75.956S91.597,280.137,133.548,280.137z"/>
	<path style="fill:#B8DE6F;" d="M378.452,280.137c41.95,0,75.956,34.006,75.956,75.956s-34.006,75.956-75.956,75.956
		s-75.956-34.006-75.956-75.956S336.502,280.137,378.452,280.137z"/>
</g>
<g>
	<path style="fill:#FFFFFF;" d="M133.548,325.148c17.07,0,30.945,13.886,30.945,30.945s-13.875,30.945-30.945,30.945
		c-17.059,0-30.945-13.886-30.945-30.945S116.488,325.148,133.548,325.148z"/>
	<path style="fill:#FFFFFF;" d="M378.452,325.148c17.059,0,30.945,13.886,30.945,30.945s-13.886,30.945-30.945,30.945
		c-17.07,0-30.945-13.886-30.945-30.945S361.382,325.148,378.452,325.148z"/>
	<path style="fill:#FFFFFF;" d="M206.803,113.709v85.802H46.361l67.618-71.838c6.38-6.785,22.989-13.965,32.307-13.965H206.803z"/>
</g>
<path style="fill:#CFF2F2;" d="M338.291,124.872l34.703,74.639H206.803v-85.802h113.9
	C326.24,113.709,335.94,119.864,338.291,124.872z"/>
<path style="fill:#FECA72;" d="M466.213,218.011C491.396,226.405,512,254.987,512,281.533c-26.658,0-48.263-21.605-48.263-48.263
	C463.737,227.936,464.603,222.816,466.213,218.011z"/>
</svg>`,et={"car-image":"_car-image_14egi_2","car-image__svg":"_car-image__svg_14egi_11"},it=({classList:i,carObj:e})=>{var s;const t=a({tag:"div",classList:x(et["car-image"],i),textContent:"start"});t.getNode().innerHTML=Nt,(s=t.getNode().querySelector("svg"))==null||s.classList.add(et["car-image__svg"]);const n=t.getNode().querySelector(".car__body");return n==null||n.style.setProperty("fill",e.color),t},St="_car_1oc49_2",Et="_car__winner_1oc49_10",Rt="_car__winner_visible_1oc49_21",Pt="_car__control_1oc49_38",v={car:St,car__winner:Et,car__winner_visible:Rt,"car__track-end-image":"_car__track-end-image_1oc49_24","car__track-car":"_car__track-car_1oc49_32",car__control:Pt,"car__control-button":"_car__control-button_1oc49_44","car__control-button_active":"_car__control-button_active_1oc49_52"};class $ extends G{constructor(t,n,s){super(s);l(this,"id");l(this,"editComponent");l(this,"trackCar",null);l(this,"engineStats",null);l(this,"engineStarted",!1);l(this,"animationInterval",null);l(this,"raceCounter",0);l(this,"carObj");l(this,"startButton");l(this,"driveButton");l(this,"lastRaceTime");l(this,"winText");this.id=t.id,this.editComponent=n,this.carObj=t,this.lastRaceTime=0,this.startButton=a({tag:"button",classList:v["car__control-button"],textContent:"start"}),this.driveButton=a({tag:"button",classList:v["car__control-button"],textContent:"drive",disabled:!0}),this.winText=a({tag:"div",classList:v["car__win-text"],children:[a({tag:"span",textContent:""})]})}engineIsStarted(){return this.engineStarted}render(){this.children.forEach(c=>c.destroy()),this.driveButton.addEventListener("click",()=>{this.drive()}),this.startButton.addEventListener("click",()=>{this.engineStarted?this.stop():this.start()});const t=a({tag:"div",classList:v.car__control,children:[a({tag:"span",textContent:this.carObj.name}),a({tag:"button",classList:v["car__control-button"],textContent:"delete"}).addEventListener("click",()=>{f().deleteCar(this.id,()=>{this.destroy()})}),a({tag:"button",classList:v["car__control-button"],textContent:"select"}).addEventListener("click",()=>{this.editComponent.selectCar(this.carObj,this)}),this.startButton,this.driveButton,this.winText]});this.append(t);const n=a({tag:"div",classList:v["car__track-control"]}),s=a({tag:"div",classList:v["car__track-end"],children:[a({tag:"img",classList:v["car__track-end-image"],src:xt,alt:"track end flag"})]});this.trackCar=it({carObj:this.carObj,classList:v["car__track-car"]});const r=a({tag:"div",classList:v.car__track,children:[n,s,this.trackCar]});return this.append(r),this}win(){f().getWinner(this.carObj.id,t=>{if(!t.id){f().createWinner(this.carObj.id,this.lastRaceTime);return}f().updateWinner(this.carObj.id,this.lastRaceTime<t.time?this.lastRaceTime:t.time,t.wins+1)}),this.winText.getNode().textContent=`${this.carObj.name} win for ${this.lastRaceTime/1e3} sec!`}stop(t){this.winText.getNode().textContent="",this.animationInterval&&clearInterval(this.animationInterval),f().engineStop(this.id,n=>{var s;this.startButton.getNode().textContent="start",this.driveButton.getNode().disabled=!0,this.raceCounter+=1,this.engineStats=n,this.engineStarted=!1,(s=this.trackCar)==null||s.getNode().style.setProperty("left","0")}),t==null||t()}setCar(t){this.carObj=t,this.render()}start(t){f().engineStart(this.id,n=>{var s;this.startButton.getNode().textContent="stop",this.driveButton.getNode().disabled=!1,this.engineStats=n,this.engineStarted=!0,(s=this.trackCar)==null||s.getNode().style.setProperty("left","0"),t==null||t()})}drive(t){const n=this.raceCounter,s=this.engineStats.velocity*90,r=this.engineStats.distance,c=Date.now();let g=this.engineStats.distance;this.driveButton.getNode().disabled=!0,this.animationInterval=setInterval(()=>{const o=this.trackCar.getNode(),d=this.getNode().clientWidth;g-=s,s>g&&(this.animationInterval&&clearInterval(this.animationInterval),g=0),o.style.setProperty("left",`${(d-40)*((r-g)/r)}px`)},100),f().engineDrive(this.id,o=>{const d=Date.now()-c;!this.engineStarted&&n!==this.raceCounter||(o.success===!1?this.animationInterval&&clearInterval(this.animationInterval):this.lastRaceTime=d,t==null||t(o.success))})}}const $t=s=>{var r=s,{classList:i,carObj:e,editComponent:t}=r,n=L(r,["classList","carObj","editComponent"]);return new $(e,t,C({classList:x(v.car,i)},n)).render()},It="_loader_17ye9_2",Tt="_rotation_17ye9_1",Ot={loader:It,rotation:Tt},at=t=>{var n=t,{classList:i}=n,e=L(n,["classList"]);return a(C({tag:"div",classList:x(Ot.loader,i)},e))},Mt=n=>{var s=n,{classList:i,children:e}=s,t=L(s,["classList","children"]);let r=1,c=0;const g=7;let o=null,d=r;const u=a({tag:"div",classList:p.garage__cars}),m=tt({edit:!0}),S=()=>{u.getChildren().some(_=>_ instanceof $?_.engineIsStarted():!1)&&u.getChildren().forEach(_=>{_ instanceof $&&(_.stop(),o=null)})},R=_=>{d=r,r=_,u.getChildren().forEach(N=>N.remove());const y=at({});u.append(y),f().getCars(r,g,(N,B)=>{var q;S(),u.getChildren().forEach(k=>{k.destroy()}),c=parseInt((q=B.get("X-Total-Count"))!=null?q:"0",10),u.append(a({tag:"h2",classList:p.garage__title,textContent:`Garage (${c})`})),N.forEach(k=>{u.append($t({carObj:k,editComponent:m}))})})},z=a({tag:"div",classList:p.garage__control,children:[tt({edit:!1,update:()=>{R(r)}}),m]}),F=a({tag:"div",classList:p.garage__control,children:[a({tag:"button",classList:p["garage__control-button"],textContent:"generate 100 cars"}).addEventListener("click",()=>{f().generateCars(100,()=>{R(r)})}),a({tag:"button",classList:p["garage__control-button"],textContent:"Reset garage"}).addEventListener("click",S),a({tag:"button",classList:p["garage__control-button"],textContent:"Race"}).addEventListener("click",()=>{u.getChildren().forEach(_=>{_ instanceof $&&u.getChildren().every(y=>y instanceof $?!y.engineIsStarted():!(y instanceof $))&&(d=r,_.start(()=>{_.drive(y=>{!o&&y&&d===r&&(_.win(),o=_)})}))})})]}),O=a({tag:"span",classList:p["garage__curr-page"],textContent:`Page ${r}`}),D=a({tag:"div",classList:p.garage__pagination,children:[a({tag:"button",classList:p["garage__pagination-button"],textContent:"prev"}).addEventListener("click",()=>{r!==1&&(R(r-1),O.getNode().textContent=`Page ${r}`)}),O,a({tag:"button",classList:p["garage__pagination-button"],textContent:"next"}).addEventListener("click",()=>{c/g<=r||(R(r+1),O.getNode().textContent=`Page ${r}`)})]}),M=a({tag:"div",classList:p.garage__content,children:[z,F,u,D]});return a(C({tag:"main",classList:x(p.garage,i),children:W(M,e)},t)).componentDidMount(()=>{R(r)})},Bt=()=>a({tag:"template",children:[st({}),Mt({}),rt({})]}),Wt="_winners_1nya7_2",Ft="_winners__content_1nya7_8",jt="_winners__table_1nya7_18",At="_winners__control_1nya7_36",h={winners:Wt,winners__content:Ft,winners__table:jt,"winners__winner-img":"_winners__winner-img_1nya7_29","winners__table-row":"_winners__table-row_1nya7_32",winners__control:At},zt=n=>{var s=n,{classList:i,children:e}=s,t=L(s,["classList","children"]);let r=1,c=0;const g=10;let o="DESC",d="wins";const u=a({tag:"div",classList:h.winners__table}),m=O=>{r=O,u.getChildren().forEach(M=>M.remove());const D=at({});u.append(D),f().getWinners({page:r,limit:g,sort:d,order:o,callback:(M,_)=>{var y;u.getChildren().forEach(N=>{N.destroy()}),c=parseInt((y=_.get("X-Total-Count"))!=null?y:"0",10),u.append(a({tag:"h2",classList:h.winners__title,textContent:`Winners (${c})`})),u.append(a({tag:"div",classList:h["winners__table-row"],children:[a({tag:"span",classList:h.winners__title,textContent:"id"}),a({tag:"span",classList:h.winners__title,textContent:"name"}),a({tag:"span",classList:h.winners__title,textContent:"car"}),a({tag:"div",classList:h.winners__title,children:[a({tag:"span",classList:h.winners__title,textContent:"time",children:[]}),a({tag:"span",classList:h.winners__title,textContent:"(SORT)",children:[]}).addEventListener("click",()=>{d="time",o=o==="ASC"?"DESC":"ASC",m(r)})]}),a({tag:"div",classList:h.winners__title,children:[a({tag:"span",classList:h.winners__title,textContent:"wins",children:[]}),a({tag:"span",classList:h.winners__title,textContent:"(SORT)",children:[]}).addEventListener("click",()=>{d="wins",o=o==="ASC"?"DESC":"ASC",m(r)})]})]})),M.forEach(N=>{f().getCar(N.id,B=>{u.append(a({tag:"div",classList:h["winners__table-row"],children:[a({tag:"span",classList:h.winners__title,textContent:String(B.id)}),a({tag:"span",classList:h["winners__winner-title"],textContent:`${B.name}`}),it({carObj:B,classList:h["winners__winner-img"]}),a({tag:"span",classList:h["winners__winner-title"],textContent:`${N.time/1e3} sec`}),a({tag:"span",classList:h["winners__winner-name"],textContent:`${N.wins} wins`})]}))})})}})},S=a({tag:"span",classList:h["winners__curr-page"],textContent:`Page ${r}`}),R=a({tag:"div",classList:h.winners__pagination,children:[a({tag:"button",classList:h["winners__pagination-button"],textContent:"prev"}).addEventListener("click",()=>{r!==1&&(m(r-1),S.getNode().textContent=`Page ${r}`)}),S,a({tag:"button",classList:h["winners__pagination-button"],textContent:"next"}).addEventListener("click",()=>{c/g<=r+1||(m(r+1),S.getNode().textContent=`Page ${r}`)})]}),z=a({tag:"div",classList:h.winners__content,children:[u,R]}),F=a(C({tag:"main",classList:x(h.winners,i),children:W(z,e)},t)).componentDidMount(()=>{m(r)});return F.onRoute=()=>{m(r)},F},Dt=()=>a({tag:"template",children:[st({}),zt({}),rt({})]}),E={startPage:{name:"startPage",path:"/async-race/",view:Bt,needAuth:!1,params:{page:void 0}},winners:{name:"winners",path:"/async-race/winners",view:Dt,needAuth:!1,params:{difficulty:void 0,level:void 0}}};function nt(i){return Object.keys(E).reduce((e,t)=>{var n;return((n=E[t])==null?void 0:n.path)===i?E[t]:e},void 0)}const b=class b{constructor(e,t){l(this,"root");l(this,"defaultRoute");l(this,"states",{});l(this,"prevRoute","");this.root=this.createOrGetRoot(e),this.defaultRoute=t}static create(e,t){return b.instance&&I("Router already created"),b.instance=new b(e,t),b.instance}static getIsInitialized(){return!!b.instance}static initialLoad(){const e=()=>{const t=window.location.href.split("/?/")[1];let n=new URL(window.location.href.toString());t&&(n=new URL(`${window.location.pathname}${t}`,window.location.origin+window.location.pathname));const s=n.pathname,r={};new URLSearchParams(n.search).forEach((c,g)=>{r[g]=c}),b.instance.route(s,r,!1)};window.addEventListener("popstate",()=>{e()}),e()}static getInstance(){return b.instance}createOrGetRoot(e){return this.root||(e?this.root=e:(this.root=a({tag:"div",id:"root"}),document.body.append(this.root.getNode()))),this.root}getRoot(){return this.root}route(e,t,n=!0){var r;let s=typeof e=="string"?nt(e):e;if(!s&&!this.defaultRoute&&I("Route never exist and default route is not set"),!s&&this.defaultRoute&&(s=this.defaultRoute),s){const c=new URL(window.location.href);c.searchParams.forEach((o,d)=>c.searchParams.delete(d)),t&&Object.entries(t).forEach(([o,d])=>{d!==null&&c.searchParams.set(o,String(d))}),c.pathname=s.path;let g=s.view({});(r=this.states[this.prevRoute])==null||r.appendChildren(this.root.getChildren()),this.states[s.path]?(g=this.states[s.path],g.getChildren().forEach(o=>o.onRoute())):this.states[s.path]=g,this.root.getChildren().forEach(o=>o.remove()),this.root.appendChildren(g.getChildren()),this.prevRoute=s.path,n&&window.history.pushState({},"",c)}}getRouteInfo(){var s;const e=nt(window.location.pathname),t=JSON.parse(JSON.stringify(e));t.params={},e||I("Route not found");const n=new URLSearchParams(window.location.search);return Object.keys((s=e.params)!=null?s:{}).forEach(r=>{t.params&&(typeof n.get(r)=="string"?t.params[r]=JSON.parse(String(n.get(r))):t.params[r]=n.get(r))}),t}};l(b,"instance");let P=b;const ot=()=>{P.getInstance()||I("Router not created");const i=P.getInstance();return{root:i.getRoot(),route:i.route.bind(i),routeInfo:i.getRouteInfo.bind(i),isInitialized:P.getIsInitialized()}},kt=(i,e)=>(P.create(i,e),P.initialLoad(),ot());kt(void 0,E.startPage);yt();
//# sourceMappingURL=index-BnnMop-_.js.map
